<div fxLayout="row" fxLayout.xs = "column" *ngIf = "admin_view !== undefined; else spinnerPermissions">
  <mat-card class = "outer">
    <mat-card-title><h2>All Programmes </h2></mat-card-title>
    <mat-card-content>
      <div class="container-fluid">
        <div *ngIf = "pendingRequest" id = "spinner">
            <mat-spinner></mat-spinner>
            <p> Loading programmes... </p>
        </div>

        <table class = "table" *ngIf = "!pendingRequest">
          <thead>
          <tr>
            <th scope="col">Faculty</th>
            <th scope="col">Programmes offered</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor = "let fac of faculties">
            <td>{{fac.title}}</td>
            <td>{{fac.number}}</td>
          </tr>
          <tr id = "totals">
            <td>Total Programmes</td>
            <td>{{progTotal}}</td>
          </tr>
          </tbody>
        </table>
      </div>

    </mat-card-content>

    <mat-card-actions>
      <button
        mat-raised-button
        [ngStyle]="{'background-color': bg_color, 'color': 'white'}"
        [routerLink]="['/view']">
        View Programmes
      </button>
    </mat-card-actions>
    <mat-card-actions *ngIf = "admin_view">
      <button
        mat-raised-button
        color="warn"
        [matBadge] = "errTotal"
        (click) = "openDialog()">
        Show Upload Errors
      </button>
    </mat-card-actions>
  </mat-card>

  <mat-card class = "outer" id = "upload" #upload *ngIf = "admin_view" >
    <div id="upload-area">
      <i class="material-icons">
        cloud_upload
      </i>
      <mat-card-title> Drag and drop files here or browse your file system </mat-card-title>
      <mat-card-subtitle> Only one file allowed at a time</mat-card-subtitle>
      <angular-file-uploader
        style = "width: 100%"
        [config]="afuConfig"
        (ApiResponse)="DocUpload($event)">
      </angular-file-uploader>
    </div>

  </mat-card>
</div>

<ng-template #spinnerPermissions>
  <mat-spinner id = "permissions"></mat-spinner>
  <p style = "text-align: center;">Reading permissions...</p>
</ng-template>

